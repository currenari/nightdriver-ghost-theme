<!DOCTYPE html>
<html lang="{{@site.locale}}">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{meta_title}}</title>

    {{!-- SEO Meta Tags are handled by ghost_head --}}

    {{!-- Favicon --}}
    {{#if @site.icon}}
        <link rel="icon" href="{{@site.icon}}" type="image/png">
    {{/if}}

    {{!-- Font Preloads --}}
    <link rel="preload" href="{{asset "fonts/inter/Inter-Regular.woff2"}}" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="{{asset "fonts/jetbrains-mono/JetBrainsMono-SemiBold.woff2"}}" as="font" type="font/woff2" crossorigin>

    {{!-- Theme Styles --}}
    <link rel="stylesheet" type="text/css" href="{{asset "css/fonts.css"}}">
    <link rel="stylesheet" type="text/css" href="{{asset "css/screen.css"}}">
    {{#if @custom.snipcart_public_api_key}}
      <link rel="stylesheet" href="https://cdn.snipcart.com/themes/v3.7.1/default/snipcart.css">
    {{/if}}

    <script>
    (function () {
      try {
        var t = localStorage.getItem('nightdriver_theme');
        if (t) document.documentElement.classList.add('nightdriver-theme-mode-' + t);
      } catch (e) {}
    })();
    </script>





    {{!-- Custom Mode Variables --}}
    <style>
  :root {
    --nightdriver-progress-bar-color: {{@custom.progress_bar_color}};
    --nightdriver-progress-track-color: {{@custom.progress_track_color}};
    --nightdriver-progress-height: {{#match @custom.progress_bar_height "Off"}}0{{else}}{{@custom.progress_bar_height}}
    {{/match}};
  }

  /* Custom Mode - Customizable Theme Colors */
  html.nightdriver-theme-mode-custommode {
    --color-background: {{@custom.nightdriver_custom_mode_background}};
    --color-surface: {{@custom.nightdriver_custom_mode_surface}};
    --color-border: {{@custom.nightdriver_custom_mode_border}};
    --color-text: {{@custom.nightdriver_custom_mode_text}};
    --color-text-secondary: {{@custom.nightdriver_custom_mode_text_secondary}};
    --color-text-tertiary: {{@custom.nightdriver_custom_mode_text_tertiary}};
    --nightdriver-utility-bar-bg: {{@custom.nightdriver_custom_mode_header_utility_bg}};
  }

  /* Custom Mode - Custom Header */
  html.nightdriver-theme-mode-custommode .nightdriver-site-header {
    background-color: {{@custom.nightdriver_custom_mode_header_bg}};
    border-bottom-color: {{@custom.nightdriver_custom_mode_border}};
  }

  html.nightdriver-theme-mode-custommode .nightdriver-site-logo {
    color: {{@custom.nightdriver_custom_mode_text}};
  }

  html.nightdriver-theme-mode-custommode .nightdriver-site-logo:hover {
    color: var(--color-accent);
  }

  html.nightdriver-theme-mode-custommode .nightdriver-nav-item a {
    color: {{@custom.nightdriver_custom_mode_text_secondary}};
  }

  html.nightdriver-theme-mode-custommode .nightdriver-nav-item a:hover,
  html.nightdriver-theme-mode-custommode .nightdriver-nav-item.nightdriver-nav-item--active a {
    color: {{@custom.nightdriver_custom_mode_text}};
  }

  /* Custom Mode - Custom Footer */
  html.nightdriver-theme-mode-custommode .nightdriver-site-footer {
    background-color: {{@custom.nightdriver_custom_mode_footer_bg}};
  }

  /* Custom Mode - UI Spacer */
  html.nightdriver-theme-mode-custommode .nightdriver-ui-spacer {
    background-color: {{@custom.nightdriver_custom_mode_ui_spacer_bg}};
  }
</style>

    {{!-- Ghost outputs important tags and meta data --}}
    {{ghost_head}}
</head>
<body class="{{body_class}}">
    {{#if @custom.snipcart_public_api_key}}
      <div hidden id="snipcart" data-api-key="{{@custom.snipcart_public_api_key}}"></div>
      <script async src="https://cdn.snipcart.com/themes/v3.7.1/default/snipcart.js"></script>
    {{/if}}

    {{!-- Site Header --}}
    {{> "header/header"}}


    {{!-- Main Content --}}
    <main class="nightdriver-site-main">
        {{> "ui/ui-spacer"}}
        {{{body}}}
    </main>

    {{!-- Site Footer --}}
    {{> "footer/footer"}}



    {{!-- Ghost outputs important scripts and data --}}
    {{ghost_foot}}

    {{!-- Theme Scripts --}}
    <script src="{{asset "js/main.js"}}"></script>

</body>
</html>
