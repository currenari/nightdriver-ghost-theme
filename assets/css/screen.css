/* ========================================
   NIGHTDRIVER THEME
   A tech-forward Ghost theme 
   with three modes, a collapsible utility bar, 
   and a bento-style layout.
   ======================================== */

:root {
  /* Colours */
  --color-background: #f7f7f5;
  --color-surface: #ffffff;
  --color-border: #e6e6e1;
  --color-text: #151515;
  --color-text-secondary: #5a5a5a;
  --color-text-tertiary: #8a8a8a;
  --color-accent: #0ea5e9;
  --color-accent-hover: #0284c7;
  --link-opacity: 0.77;
  --link-hover-opacity: 1;

  /* ----------------------------------------
     TYPOGRAPHY SYSTEM
     
     Ghost Admin overrides via:
     --gh-font-heading, --gh-font-body
     
     Three roles, two font slots:
     - Heading: titles, hero text
     - Body: paragraphs, reading content
     - UI: labels, nav, tags, buttons (follows heading)
     ---------------------------------------- */
  
  /* Local font stacks */
  --font-mono-stack: 'JetBrains Mono', ui-monospace, SFMono-Regular, monospace;
  --font-sans-stack: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  
  /* Ghost-swappable fonts */
  --font-heading: var(--gh-font-heading, var(--font-mono-stack));
  --font-body: var(--gh-font-body, var(--font-sans-stack));
  --font-ui: var(--font-heading);
  
  /* Tracking */
  --tracking-body: -0.011em;
  --tracking-heading: -0.02em;
  --tracking-ui: 0.08em;

  /* Layout */
  --container-width: 1180px;
  --container-padding: 2rem;
  --header-height: 3.6rem;
  --nightdriver-utility-peek: 5px;
  --nightdriver-utility-handle-h: 6px;

  /* Post layout */
  --post-header-width: 720px;
  --post-content-width: 680px;
  --post-image-wide-width: 1100px;

  /* Spacing */
  --space-sm: 0.5rem;
  --space-md: 1rem;
  --space-lg: 1.5rem;
  --space-xl: 2rem;
  --space-2xl: 3rem;
  --space-3xl: 4rem;
  --space-4xl: 6rem;

  /* Section system */
  --section-pad-y: var(--space-4xl);
  --section-pad-y-compact: var(--space-3xl);
  --section-header-gap: calc(var(--space-md) + 0.25rem);
  --section-title-bottom: var(--space-sm);
  --section-content-gap: var(--space-lg);
  --ui-spacer-height: var(--space-3xl);

  /* Radius */
  --radius-sm: 0.2rem;
  --radius-md: 0.3rem;
  --radius-lg: 0.4rem;

  /* Surfaces */
  --card-bg: var(--color-surface);
  --card-border: var(--color-border);
  --shadow-1: 0 1px 2px rgba(0, 0, 0, 0.06), 0 10px 24px rgba(0, 0, 0, 0.08);
  --shadow-2: 0 2px 6px rgba(0, 0, 0, 0.06), 0 10px 22px rgba(0, 0, 0, 0.08);

  /* Mode rail */
  --nightdriver-rail-track: color-mix(in srgb, var(--color-text) 18%, transparent);
  --nightdriver-rail-dot-border: color-mix(in srgb, var(--color-text) 28%, transparent);
  --nightdriver-rail-indicator-bg: color-mix(in srgb, var(--color-text) 8%, transparent);
  --nightdriver-rail-indicator-border: color-mix(in srgb, var(--color-text) 20%, transparent);
  --nightdriver-rail-focus: color-mix(in srgb, var(--color-text) 35%, transparent);

  /* Motion */
  --transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);

  /* Header control system */
  --nightdriver-control-h: 2.4rem;
}

/* ========================================
   BASE
   ======================================== */

*,
*::before,
*::after {
  box-sizing: border-box;
}

html {
  font-size: 14px;
  -webkit-text-size-adjust: 100%;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  min-height: 100%;
}

body {
  margin: 0;
  font-family: var(--font-body);
  font-size: 1rem;
  font-weight: 400;
  line-height: 1.6;
  letter-spacing: var(--tracking-body);
  color: var(--color-text);
  background-color: var(--color-background);
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

img,
video {
  max-width: 100%;
  height: auto;
  display: block;
}

a {
  color: inherit;
}

/* Enhanced heading typography - applies to all headings */
h1, h2, h3, h4, h5, h6 {
  font-family: var(--font-heading);
  font-weight: 600;
  line-height: 1.2;
  letter-spacing: var(--tracking-heading);
}

strong,
b {
  font-weight: 500;
}

/* ========================================
   GLOBAL: NO UNDERLINES ANYWHERE
   ======================================== */

a,
a:link,
a:visited,
a:hover,
a:active,
a:focus,
a:focus-visible {
  text-decoration: none !important;
  text-decoration-thickness: 0 !important;
  text-underline-offset: 0 !important;
  box-shadow: none !important;
  background-image: none !important;
}

u,
ins {
  text-decoration: none !important;
  text-decoration-thickness: 0 !important;
  text-underline-offset: 0 !important;
  border-bottom: 0 !important;
}

:where(a) {
  color: inherit;
  opacity: var(--link-opacity);
  transition: var(--transition);
}

:where(a:hover, a:focus-visible) {
  opacity: var(--link-hover-opacity);
}

/* ========================================
   HEADER
   ======================================== */

.nightdriver-site-header {
  position: sticky;
  top: 0;
  z-index: 100;
  transition: var(--transition);
}

/* --- TOP BAR (layer 1) --- */
.nightdriver-header-top {
  position: relative;
  z-index: 30;
  background-color: var(--color-background);
  border-bottom: 1px solid var(--color-border);
}

.nightdriver-header-container {
  min-height: var(--header-height);
  max-width: var(--container-width);
  margin: 0 auto;
  padding: 0 var(--container-padding);
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-2xl);
}

.nightdriver-site-logo {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  text-decoration: none;
  font-family: var(--font-heading);
  font-size: 0.98rem;
  font-weight: 600;
  letter-spacing: -0.01em;
  color: var(--color-text);
  transition: var(--transition);
}

.nightdriver-site-logo:hover {
  opacity: var(--link-hover-opacity);
}

.nightdriver-site-logo img {
  height: 2.4rem;
  width: auto;
  object-fit: contain;
  display: block;
}

.nightdriver-site-nav {
  flex: 1;
  display: flex;
  align-items: center;
  gap: var(--space-xl);
}

.nightdriver-nav-list {
  margin: 0;
  padding: 0;
  list-style: none;
  display: flex;
  gap: 0;
}

.nightdriver-nav-item {
  display: inline-flex;
  align-items: center;
}

.nightdriver-nav-item:not(:first-child) {
  padding-left: 0.65rem;
}

/* Desktop navigation separators only */
.nightdriver-site-nav .nightdriver-nav-item:not(:first-child)::before {
  content: "/";
  margin-right: 0.65rem;
  font-weight: 500;
  color: var(--color-text-tertiary);
}


.nightdriver-nav-item a {
  text-decoration: none;
  font-size: 0.75rem;
  font-weight: 500;
  letter-spacing: 0.01em;
  text-transform: uppercase;
  color: var(--color-text-secondary);
  opacity: 0.85;
  transition: var(--transition);
}

.nightdriver-nav-item a:hover {
  color: var(--color-text);
  opacity: 1;
}

.nightdriver-nav-item.nightdriver-nav-item--active a {
  color: var(--color-text);
  font-weight: 500;
  opacity: 1;
}

/* Progress bar stays glued to bottom of TOP bar */
.nightdriver-header-top .nightdriver-progress {
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 40;
}

/* --- UTILITY BAR (layer 2, overlay) --- */
.nightdriver-header-utility {
  position: absolute;
  left: 0;
  right: 0;

  /* sits directly under the top bar */
  top: var(--header-height);

  z-index: 20;
  background: var(--nightdriver-utility-bar-bg, var(--color-surface));

  transition: transform 220ms ease;
  will-change: transform;
}

.nightdriver-header-utility-inner {
  overflow: hidden;
}

.nightdriver-header-utility-container {
  max-width: var(--nightdriver-utility-max, calc(var(--container-width) - 6rem));
  margin: 0 auto;
  padding: 0.6rem var(--container-padding);
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  align-items: center;
  gap: var(--space-xl);
}

.nightdriver-header-utility-left { justify-self: start; }
.nightdriver-header-utility-center {
  justify-self: center;
  display: flex;
  justify-content: center;
}
.nightdriver-header-utility-right {
  justify-self: end;
  display: inline-flex;
  align-items: center;
  gap: var(--space-lg);
}

/* Mode rail (utility bar) */
.nightdriver-mode-rail {
  position: relative;
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  grid-template-rows: auto auto;
  align-items: center;
  gap: 6px 14px;
  min-width: 320px;
  padding: 0;
  width: max-content;
}

.nightdriver-mode-rail__end {
  appearance: none;
  background: none;
  border: 0;
  padding: 6px 8px;
  cursor: pointer;
  opacity: 0.85;
  color: var(--color-text-secondary);
}

.nightdriver-mode-rail__end[data-mode="day"] { grid-column: 1; grid-row: 1; justify-self: end; }
.nightdriver-mode-rail__track { grid-column: 2; grid-row: 1; }
.nightdriver-mode-rail__end[data-mode="night"] { grid-column: 3; grid-row: 1; justify-self: start; }

.nightdriver-mode-rail__track {
  position: relative;
  height: 26px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: clamp(140px, 16vw, 180px);
}

.nightdriver-mode-rail__track::before {
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  top: 50%;
  transform: translateY(-50%);
  height: 1px;
  background: var(--nightdriver-rail-track-current, var(--nightdriver-rail-track));
}

.nightdriver-mode-rail__dot {
  position: relative;
  z-index: 2;
  width: 14px;
  height: 14px;
  border-radius: 999px;
  border: 1px solid var(--nightdriver-rail-dot-border);
  background: transparent;
  cursor: pointer;
  padding: 0;
  transition: transform 180ms ease, border-color 180ms ease, background 180ms ease;
}

.nightdriver-mode-rail__indicator {
  position: absolute;
  z-index: 1;
  top: 50%;
  transform: translate(-50%, -50%);
  width: 22px;
  height: 22px;
  border-radius: 999px;
  background: var(--nightdriver-rail-indicator-bg);
  border: 1px solid var(--nightdriver-rail-indicator-border);
  box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.04);
  left: var(--nightdriver-rail-x, 50%);
  transition: left 180ms ease, background 180ms ease, border-color 180ms ease;
}

.nightdriver-mode-rail:has(.nightdriver-mode-rail__end:hover),
.nightdriver-mode-rail:has(.nightdriver-mode-rail__midlabel:hover),
.nightdriver-mode-rail:has(.nightdriver-mode-rail__end:focus-visible),
.nightdriver-mode-rail:has(.nightdriver-mode-rail__midlabel:focus-visible) {
  --nightdriver-rail-track-current: color-mix(in srgb, var(--color-text) 26%, transparent);
}

.nightdriver-mode-rail:has(.nightdriver-mode-rail__end[data-mode="day"]:hover) .nightdriver-mode-rail__dot[data-mode="day"],
.nightdriver-mode-rail:has(.nightdriver-mode-rail__end[data-mode="day"]:focus-visible) .nightdriver-mode-rail__dot[data-mode="day"],
.nightdriver-mode-rail:has(.nightdriver-mode-rail__midlabel:hover) .nightdriver-mode-rail__dot[data-mode="custom"],
.nightdriver-mode-rail:has(.nightdriver-mode-rail__midlabel:focus-visible) .nightdriver-mode-rail__dot[data-mode="custom"],
.nightdriver-mode-rail:has(.nightdriver-mode-rail__end[data-mode="night"]:hover) .nightdriver-mode-rail__dot[data-mode="night"],
.nightdriver-mode-rail:has(.nightdriver-mode-rail__end[data-mode="night"]:focus-visible) .nightdriver-mode-rail__dot[data-mode="night"] {
  transform: scale(1.08);
  border-color: color-mix(in srgb, var(--color-text) 45%, transparent);
  background: color-mix(in srgb, var(--color-text) 10%, transparent);
}

.nightdriver-mode-rail__dot:hover,
.nightdriver-mode-rail__end:hover,
.nightdriver-mode-rail__midlabel:hover {
  opacity: 1;
  color: var(--color-text);
}

.nightdriver-mode-rail__dot:hover {
  transform: scale(1.12);
  border-color: color-mix(in srgb, var(--color-text) 45%, transparent);
  background: color-mix(in srgb, var(--color-text) 10%, transparent);
}

.nightdriver-mode-rail__midlabel {
  grid-column: 2;
  grid-row: 2;
  justify-self: center;
  align-self: start;
  position: static;
  pointer-events: auto;
  opacity: 0.85;
  color: var(--color-text-secondary);
  background: transparent;
  border: 0;
  padding: 0;
  cursor: pointer;
  position: relative;
  z-index: 2;
}

.nightdriver-mode-rail__dot:focus-visible,
.nightdriver-mode-rail__end:focus-visible {
  outline: 2px solid var(--nightdriver-rail-focus);
  outline-offset: 3px;
}

/* Universal control */
.nightdriver-control {
  font-family: var(--font-ui);
  font-size: 0.75rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: var(--tracking-ui);
  color: var(--color-text-secondary);
  opacity: 0.85;
  transition: var(--transition);
}

.nightdriver-control--brackets::before,
.nightdriver-control--brackets::after {
  color: var(--color-text-tertiary);
}

.nightdriver-control--brackets::before { content: "[ "; }
.nightdriver-control--brackets::after { content: " ]"; }

/* Search button: same control system as the mode buttons */
.nightdriver-search-btn {
  appearance: none;
  border: 0;
  cursor: pointer;

  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.6rem;

  height: var(--nightdriver-control-h);
  min-width: auto;
  padding: 0 0.5rem;

  background: transparent;
  white-space: nowrap;
}

.nightdriver-search-btn:hover {
  opacity: 1;
  color: var(--color-text);
  background: transparent;
}

.nightdriver-search-btn:focus-visible {
  outline: 2px solid var(--color-accent);
  outline-offset: 2px;
}

.nightdriver-search-btn .nightdriver-icon {
  width: 1.05rem;
  height: 1.05rem;
  display: block;
  color: currentColor;
}

.nightdriver-search-btn span {
  display: inline-block;
  transform: translateY(0.5px);
}

.nightdriver-header-cta {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.6rem;

  height: var(--nightdriver-control-h);
  min-width: auto;
  padding: 0 0.5rem;

  text-decoration: none;
}

.nightdriver-header-cta .nightdriver-icon {
  width: 1.15rem;
  height: 1.15rem;
  display: block;
  color: currentColor;
}

.nightdriver-header-utility .nightdriver-icon {
  display: block;
}

.nightdriver-header-utility .nightdriver-search-btn,
.nightdriver-header-utility .nightdriver-header-cta {
  gap: 0.6rem;
}

.nightdriver-header-cta span {
  display: inline-block;
  transform: translateY(0.5px);
}

.nightdriver-header-cta:hover {
  opacity: 1;
  color: var(--color-text);
  background: transparent;
}

/* Hidden state: slides up behind the top bar */
.nightdriver-header-utility.nightdriver-is-hidden {
  transform: translateY(calc(-100% + var(--nightdriver-utility-peek)));
}

/* Handle */
.nightdriver-header-utility-handle {
  position: absolute;
  left: 50%;
  bottom: calc(var(--nightdriver-utility-handle-h) * -1);
  transform: translateX(-50%);
  transform-origin: top center;
  width: 72px;
  height: var(--nightdriver-utility-handle-h);
  border-radius: 0 0 6px 6px;
  background: var(--color-border);
  opacity: 0.6;
  border: 0;
  padding: 0;
  cursor: pointer;
  appearance: none;
}

.nightdriver-header-utility-handle:focus-visible {
  outline: 2px solid var(--nightdriver-rail-focus);
  outline-offset: 3px;
}

.nightdriver-header-utility[data-pinned="true"] .nightdriver-header-utility-handle {
  opacity: 0.95;
  background: color-mix(in srgb, var(--color-text) 22%, var(--color-border));
  transform: translateX(-50%) scaleY(1.6);
  box-shadow: 0 0 0 1px color-mix(in srgb, var(--color-text) 18%, transparent);
}

/* ========================================
   LAYOUT
   ======================================== */

.nightdriver-site-main {
  min-height: 0;
  flex: 1 0 auto;
}

.nightdriver-site-main > .nightdriver-section:last-child {
  padding-bottom: var(--section-pad-y-compact);
}

/* 
   UI Spacer - Flexible breathing room element
   - Transparent in day/night mode (inherits page background)
   - Custom color in Nightdriver custom mode
*/
.nightdriver-ui-spacer {
  display: block;
  height: var(--ui-spacer-height, 2rem);
  min-height: var(--ui-spacer-height, 2rem);
  width: 100%;
  background-color: transparent;
}

.nightdriver-container {
  max-width: var(--container-width);
  margin: 0 auto;
  padding: 0 var(--container-padding);
}

/* ========================================
   SECTION SYSTEM
   
   Base:     .nightdriver-section
   Modifiers:
     --no-header   zero header gap
     --hero        centered text
     --surface     background color
   ======================================== */

.nightdriver-section {
  padding: var(--section-pad-y) 0;
}

.nightdriver-section--no-header {
  --section-header-gap: 0;
  --section-title-bottom: 0;
}

.nightdriver-section--hero {
  text-align: left;
  --section-content-gap: 0;
}

.nightdriver-section--surface {
  background-color: var(--color-surface);
}

/* Section Children */
.nightdriver-section-header {
  margin-bottom: var(--section-header-gap);
}

.nightdriver-section-title {
  margin: 0 0 var(--section-title-bottom);
  display: inline-flex;
  align-items: center;
  gap: 0.4rem;
  font-family: var(--font-ui);
  font-size: 0.75rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: var(--tracking-ui);
  color: var(--color-text-secondary);
  opacity: 0.9;
  padding: 0;
  border-radius: 0;
  background: transparent;
  border: 0;
}

.nightdriver-section-title::before {
  content: "";
  width: 18px;
  height: 1px;
  background: color-mix(in srgb, var(--color-text) 22%, transparent);
  display: inline-block;
  transform: translateY(1px);
}

.nightdriver-section-content {
  display: grid;
  gap: var(--section-content-gap);
}

.nightdriver-section-text {
  max-width: var(--post-content-width);
  margin-left: auto;
  margin-right: auto;
}

/* ========================================
   HERO CONTENT
   ======================================== */

.nightdriver-hero-title {
  margin: 0 0 var(--space-lg);
  font-size: 3rem;
  font-weight: 600;
  line-height: 1.1;
  letter-spacing: -0.03em;
}

.nightdriver-hero-description {
  margin: 0 auto;
  max-width: 600px;
  font-size: 1.25rem;
  line-height: 1.5;
  color: var(--color-text-secondary);
}

.nightdriver-author-avatar {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  margin-bottom: var(--space-lg);
  object-fit: cover;
}

.nightdriver-author-profile {
  background: transparent;
  border: 0;
  box-shadow: none;
}

.nightdriver-author-header {
  padding: var(--space-lg) 0 var(--space-md);
  width: min(100%, 72ch);
  margin: 0 auto;
  display: grid;
  grid-template-columns: minmax(0, 34rem) auto;
  column-gap: 0;
  row-gap: 0.42rem;
  align-items: start;
  justify-content: space-between;
}

.nightdriver-author-header .nightdriver-author-avatar {
  grid-column: 2;
  grid-row: 2;
  align-self: center;
  display: block;
  margin: 0 0 0 0.35rem;
  width: 64px;
  height: 64px;
}

.nightdriver-author-header .nightdriver-hero-title {
  grid-column: 1;
  margin: 0 0 0.2rem;
  font-size: clamp(2.2rem, 5vw, 3.6rem);
}

.nightdriver-author-rule {
  grid-column: 1;
  width: calc(100% - 0.9rem);
  height: 1px;
  background: color-mix(in srgb, var(--color-text) 16%, transparent);
}

.nightdriver-author-header .nightdriver-hero-description {
  grid-column: 1;
  max-width: 72ch;
  margin: 0.1rem 0 0;
}

@media (max-width: 760px) {
  .nightdriver-author-header {
    grid-template-columns: 1fr;
    column-gap: 0;
  }

  .nightdriver-author-header .nightdriver-author-avatar {
    grid-column: 1;
    grid-row: 3;
    margin: 0.5rem 0 0;
  }

  .nightdriver-author-rule {
    width: 100%;
  }
}

.nightdriver-author-meta {
  padding: 0 0 var(--space-lg);
  width: min(100%, 72ch);
  margin: 0 auto;
  margin-top: var(--space-xl);
}

.nightdriver-author-info-grid {
  display: grid;
  gap: var(--space-lg);
}

.nightdriver-author-info-block {
  display: grid;
  gap: 0.6rem;
}

.nightdriver-author-info-value {
  margin: 0;
  color: var(--color-text-tertiary);
  font-size: 0.9375rem;
}

.nightdriver-author-meta .nightdriver-section-title {
  font-size: 0.7rem;
  color: var(--color-text-tertiary);
}

.nightdriver-author-meta .nightdriver-bento-chip,
.nightdriver-author-meta .nightdriver-bento-chip--link {
  min-height: 1.95rem;
  font-size: 0.68rem;
  color: var(--color-text-secondary);
}

.nightdriver-author-meta .nightdriver-bento-chip--link:hover {
  border-color: var(--color-text-secondary);
  box-shadow: 0 0 0 1px color-mix(in srgb, var(--color-text) 20%, transparent),
              0 0 14px color-mix(in srgb, var(--color-text) 14%, transparent);
}

/* ========================================
   FEATURED GRID (3-card system)
   ======================================== */

.nightdriver-flexible-grid{
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: var(--space-md);
}

/* ========================================
   DRIFT ZONE BENTO GRID
   ======================================== */

.nightdriver-bento-grid {
  display: grid;
  grid-template-columns: repeat(12, minmax(0, 1fr));
  gap: var(--space-lg);
  grid-auto-rows: minmax(160px, auto);
  grid-auto-flow: dense;
  width: 100%;
}

.nightdriver-bento-card {
  grid-column: span 4;
  background: var(--card-bg);
  border: 1px solid var(--card-border);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-1);
  overflow: hidden;
  display: flex;
  flex-direction: column;
  min-height: 0;
  position: relative;
  transition: all 280ms cubic-bezier(0.4, 0, 0.2, 1);
}

.nightdriver-bento-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-2);
  border-color: color-mix(in srgb, var(--color-text-tertiary) 50%, transparent);
}

.nightdriver-bento-card--wide {
  grid-column: span 6;
}

.nightdriver-bento-card--author {
  grid-column: span 6;
}

.nightdriver-bento-author-rotator {
  grid-column: span 6;
  display: flex;
  height: 100%;
}

.nightdriver-bento-author-rotator.is-rotating {
  display: grid;
  grid-template-columns: minmax(0, 1fr);
  grid-template-rows: minmax(0, 1fr);
}

.nightdriver-bento-author-rotator.is-rotating .nightdriver-bento-card--author {
  grid-area: 1 / 1;
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
  transform: translateY(8px);
  transition: opacity 420ms ease, transform 420ms ease;
}

.nightdriver-bento-author-rotator.is-rotating .nightdriver-bento-card--author.is-active {
  opacity: 1;
  visibility: visible;
  pointer-events: auto;
  transform: translateY(0);
  z-index: 1;
}

.nightdriver-bento-author-rotator .nightdriver-bento-card--author {
  width: 100%;
  height: 100%;
}

.nightdriver-bento-author-rotator[data-rotate-on-click="true"] {
  cursor: pointer;
}

.nightdriver-bento-card--tall {
  grid-row: span 2;
}

.nightdriver-bento-card-top {
  padding: 10px 16px 0;
}

.nightdriver-bento-card-body {
  padding: 12px 16px 16px;
  display: flex;
  flex-direction: column;
  gap: 10px;
  height: 100%;
}

.nightdriver-bento-card-body > .nightdriver-bento-meta,
.nightdriver-bento-card-body > .nightdriver-bento-btn,
.nightdriver-bento-card-body > .nightdriver-cta-actions {
  margin-top: auto;
}

.nightdriver-bento-eyebrow {
  display: inline-flex;
  align-items: center;
  gap: 0.4rem;
  font-family: var(--font-ui);
  font-size: 0.65rem;
  font-weight: 700;
  letter-spacing: 0.18em;
  text-transform: uppercase;
  color: var(--color-text-secondary);
}

.nightdriver-bento-title {
  margin: 0;
  font-family: var(--font-heading);
  font-size: 1rem;
  letter-spacing: -0.01em;
}

.nightdriver-bento-text {
  margin: 0;
  color: var(--color-text-secondary);
  font-size: 0.9rem;
  line-height: 1.5;
}

.nightdriver-bento-meta {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.nightdriver-bento-chip {
  display: inline-flex;
  align-items: center;
  gap: 0.35rem;
  padding: 0.25rem 0.55rem;
  border-radius: 0;
  border: 1px solid var(--color-border);
  font-family: var(--font-ui);
  font-size: 0.65rem;
  letter-spacing: var(--tracking-ui);
  text-transform: uppercase;
  color: var(--color-text-secondary);
  background: var(--color-surface);
}

.nightdriver-bento-chip--link {
  text-decoration: none;
  color: var(--color-text);
  border-color: color-mix(in srgb, var(--color-text) 18%, var(--color-border));
}

.nightdriver-bento-chip--link:hover {
  border-color: var(--color-text);
}

.nightdriver-bento-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0.55rem 1.2rem;
  border-radius: 0;
  border: 1px solid var(--color-border);
  background: color-mix(in srgb, var(--color-surface) 70%, transparent);
  color: var(--color-text);
  text-decoration: none;
  font-weight: 600;
  letter-spacing: var(--tracking-ui);
  text-transform: uppercase;
  font-family: var(--font-ui);
  font-size: 0.75rem;
}

.nightdriver-bento-btn:hover {
  border-color: var(--color-text-secondary);
}

.nightdriver-bento-author-media {
  position: relative;
  height: 170px;
  margin: 10px 12px 0;
  border-radius: 0;
  overflow: visible;
  background: color-mix(in srgb, var(--color-border) 12%, transparent);
}

.nightdriver-bento-author-cover {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.nightdriver-bento-author-avatar {
  position: absolute;
  left: 50%;
  bottom: -28px;
  transform: translateX(-50%);
  width: 88px;
  height: 88px;
  border-radius: 50%;
  border: 4px solid var(--card-bg);
  box-shadow: 0 8px 18px rgba(0, 0, 0, 0.25);
  object-fit: cover;
  background: var(--color-surface);
  z-index: 2;
}

.nightdriver-bento-card--author .nightdriver-bento-card-body {
  padding-top: 36px;
}

.nightdriver-bento-cta-media {
  position: relative;
  height: 170px;
  margin: 10px 12px 0;
  border-radius: 0;
  overflow: visible;
  background: color-mix(in srgb, var(--color-border) 12%, transparent);
}

.nightdriver-bento-cta-cover {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.nightdriver-bento-cta-logo {
  position: absolute;
  left: 50%;
  bottom: -28px;
  transform: translateX(-50%);
  width: 88px;
  height: 88px;
  border-radius: 50%;
  border: 4px solid var(--card-bg);
  box-shadow: 0 8px 18px rgba(0, 0, 0, 0.25);
  object-fit: cover;
  background: var(--color-surface);
  z-index: 2;
}

.nightdriver-bento-card--cta .nightdriver-bento-card-body {
  padding-top: 36px;
}

.nightdriver-bento-author-rail {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  width: 36px;
  display: flex;
  align-items: flex-end;
  justify-content: center;
  background: color-mix(in srgb, var(--card-bg) 70%, transparent);
}

.nightdriver-bento-author-rail-text {
  writing-mode: vertical-rl;
  text-orientation: mixed;
  transform: rotate(180deg);
  margin-bottom: 12px;
  font-family: var(--font-ui);
  font-size: 0.6rem;
  letter-spacing: 0.26em;
  text-transform: uppercase;
  color: var(--color-text-secondary);
}

.nightdriver-bento-share-graphic {
  padding: 18px 18px 0;
}

.nightdriver-bento-share-icon {
  width: 100%;
  height: 180px;
  display: block;
  color: color-mix(in srgb, var(--color-text) 70%, transparent);
}

.nightdriver-bento-links .nav,
.nightdriver-bento-links ul {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.nightdriver-bento-links a {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.4rem 0.65rem;
  border-radius: 0;
  border: 1px solid var(--color-border);
  text-decoration: none;
  color: var(--color-text);
  background: var(--color-surface);
  font-family: var(--font-ui);
  font-size: 0.7rem;
  letter-spacing: var(--tracking-ui);
  text-transform: uppercase;
  font-weight: 600;
  transition: var(--transition);
}

.nightdriver-bento-links .nav a:hover {
  border-color: var(--color-text-secondary);
}

.nightdriver-bento-tag-cloud {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.nightdriver-bento-tag {
  display: inline-flex;
  align-items: center;
  padding: 0.35rem 0.65rem;
  border-radius: 0;
  border: 1px solid var(--color-border);
  text-decoration: none;
  font-family: var(--font-ui);
  font-size: 0.65rem;
  letter-spacing: var(--tracking-ui);
  text-transform: uppercase;
  color: var(--color-text-secondary);
  background: var(--color-surface);
}

.nightdriver-bento-tag:hover {
  border-color: var(--color-text);
  color: var(--color-text);
}

.nightdriver-bento-tag-cloud[data-rotate="true"] {
  position: relative;
  --tag-rotator-row: var(--nightdriver-btn-height, 2.15rem);
  min-height: calc(var(--tag-rotator-row) * 3);
  overflow: hidden;
}

.nightdriver-bento-tag-cloud[data-rotate="true"] .nightdriver-bento-tag {
  position: absolute;
  left: 0;
  top: 0;
  opacity: 0;
  transform: translateY(10px);
  transition: opacity 0.4s ease, transform 0.4s ease;
  max-width: 100%;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
}

.nightdriver-bento-tag-cloud[data-rotate="true"] .nightdriver-bento-tag.is-active {
  opacity: 1;
  transform: translateY(0);
}

.nightdriver-bento-tag-cloud[data-rotate="true"] .nightdriver-bento-tag.is-active-2 {
  opacity: 1;
  transform: translateY(var(--tag-rotator-row));
}

.nightdriver-bento-tag-cloud[data-rotate="true"] .nightdriver-bento-tag.is-active-3 {
  opacity: 1;
  transform: translateY(calc(var(--tag-rotator-row) * 2));
}

.nightdriver-bento-card--share {
  background: var(--card-bg);
}

.nightdriver-bento-card--donate {
  background: var(--card-bg);
}

@media (max-width: 900px) {
  .nightdriver-bento-grid {
    grid-template-columns: repeat(6, minmax(0, 1fr));
  }

  .nightdriver-bento-card {
    grid-column: span 6;
  }

  .nightdriver-bento-card--wide {
    grid-column: span 6;
  }

  .nightdriver-bento-author-rotator {
    grid-column: span 6;
  }
}

@media (max-width: 640px) {
  .nightdriver-bento-grid {
    grid-template-columns: repeat(1, minmax(0, 1fr));
  }

  .nightdriver-bento-card,
  .nightdriver-bento-card--wide,
  .nightdriver-bento-card--tall {
    grid-column: span 1;
    grid-row: auto;
  }

  .nightdriver-bento-author-rotator {
    grid-column: span 1;
  }
}

/* ========================================
   CARD SHELL - Modern proportions
   ======================================== */

.nightdriver-grid-card{
  border-radius: var(--radius-lg);
  background: var(--card-bg);
  border: 1px solid var(--card-border);
  overflow: hidden;
  transition: all 280ms cubic-bezier(0.4, 0, 0.2, 1);
  display: flex;
  flex-direction: column;
  text-decoration: none;
  position: relative;
  
  box-shadow: var(--shadow-1);
}

.nightdriver-grid-card::before {
  display: none;
}

.nightdriver-grid-card *{ 
  text-decoration: none; 
}

.nightdriver-grid-card:hover{
  transform: translateY(-2px);
  box-shadow: var(--shadow-2);
  border-color: color-mix(in srgb, var(--color-text-tertiary) 50%, transparent);
}


/* ========================================
   IMAGE REGION - Taller, more premium ratio
   ======================================== */

.nightdriver-card-media{
  position: relative;
  height: clamp(145px, 14vw, 190px);
  background: linear-gradient(135deg, rgba(20, 30, 48, 0.8), rgba(36, 59, 85, 0.8));
  overflow: hidden;
}

.nightdriver-card-top{
  padding: 6px 16px 6px;
  background: transparent;
  border-bottom: 1px solid var(--card-border);
}

.nightdriver-card-image{
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  transform: scale(1);
  transition: transform 420ms cubic-bezier(0.4, 0, 0.2, 1);
  filter: brightness(0.95) contrast(1.05);
}

.nightdriver-grid-card:hover .nightdriver-card-image{
  transform: scale(1.05);
  filter: brightness(1) contrast(1.08);
}

.nightdriver-card-media::after{
  content: "";
  position: absolute;
  left: 0; 
  right: 0; 
  bottom: 0;
  height: 110px;
  pointer-events: none;
  background: linear-gradient(
    to bottom, 
    rgba(0, 0, 0, 0), 
    rgba(0, 0, 0, 0.45) 80%,
    rgba(0, 0, 0, 0.65)
  );
  z-index: 1;
}

/* Featured section: keep imagery clean and bright */
.nightdriver-section--featured .nightdriver-card-media::after {
  opacity: 0;
}

.nightdriver-section--featured .nightdriver-card-image {
  filter: none;
}

.nightdriver-section--featured .nightdriver-grid-card:hover .nightdriver-card-image {
  filter: brightness(1.02) contrast(1.02);
}

/* ========================================
   VERTICAL DATE BADGE - More refined
   ======================================== */

.nightdriver-card-meta-vert{
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  width: 38px;
  display: flex;
  align-items: flex-end;
  justify-content: center;
  pointer-events: none;
  z-index: 2;
}

.nightdriver-card-meta-vert::before{
  content: "";
  position: absolute;
  inset: 0;
  background: var(--card-bg);
  opacity: 0.8;
}

.nightdriver-card-meta-vert-text{
  position: relative;
  z-index: 1;
  margin-bottom: 16px;

  writing-mode: vertical-rl;
  text-orientation: mixed;
  transform: rotate(180deg);

  font-family: var(--font-ui);
  font-size: 0.625rem;
  font-weight: 700;
  letter-spacing: 0.2em;
  text-transform: uppercase;

  color: var(--color-text-secondary);
}

/* ========================================
   BOTTOM CONTENT PANEL - Better spacing
   ======================================== */

.nightdriver-card-bottom{
  padding: 12px 16px 14px;
  background: transparent;
  border-top: 1px solid var(--card-border);
  flex-grow: 1;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.nightdriver-card-tag{
  margin: 0;
  display: inline-flex;
  align-self: flex-start;
  padding: 0.2rem 0.5rem;
  border-radius: var(--radius-sm);
  border: 1px solid var(--color-border);
  font-size: 0.6rem;
  font-weight: 700;
  letter-spacing: 0.15em;
  text-transform: uppercase;
  background: var(--color-surface);
  transition: opacity 200ms ease;
}

.nightdriver-card-top .nightdriver-card-tag {
  padding: 0;
  border: 0;
  background: transparent;
}

.nightdriver-grid-card:hover .nightdriver-card-tag{
  opacity: 0.8;
}

.nightdriver-card-tag:hover {
  color: var(--color-text);
  border-color: var(--color-text-tertiary);
}

.nightdriver-card-title{
  margin: 0;
  font-family: var(--font-heading);
  font-size: clamp(0.9rem, 0.82rem + 0.35vw, 1rem);
  font-weight: 600;
  line-height: 1.35;
  letter-spacing: -0.02em;
  color: var(--color-text);

  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 2;
  line-clamp: 2;
  overflow: hidden;
  
  transition: color 200ms ease;
}

.nightdriver-grid-card:hover .nightdriver-card-title{
  color: var(--color-text);
}

.nightdriver-card-title-text{
  color: inherit;
  text-decoration: none;
}

/* ========================================
   CARD VARIANTS
   ======================================== */

.nightdriver-grid-card--featured3-mid{
  border-color: rgba(255, 255, 255, 0.08);
}

.nightdriver-grid-card--featured3-mid:hover{
  border-color: rgba(255, 255, 255, 0.14);
  transform: translateY(-6px);
}

.nightdriver-grid-card--no-image .nightdriver-card-media{ 
  display: none; 
}

.nightdriver-grid-card--no-image .nightdriver-card-meta-vert{ 
  display: none; 
}

.nightdriver-grid-card--no-image .nightdriver-card-bottom{
  padding: 28px 24px 30px;
  min-height: 180px;
}

.nightdriver-grid-card--no-image .nightdriver-card-title{
  font-size: 1.25rem;
  -webkit-line-clamp: 3;
  line-clamp: 3;
}

/* ========================================
   RESPONSIVE DESIGN
   ======================================== */

@media (max-width: 840px){
  .nightdriver-flexible-grid{ 
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: var(--space-lg);
  }
}

@media (max-width: 600px){
  .nightdriver-flexible-grid{ 
    grid-template-columns: 1fr;
  }
  
  .nightdriver-card-bottom{
    padding: 16px 18px 18px;
  }
}

/* ========================================
   ACCESSIBILITY & POLISH
   ======================================== */

.nightdriver-grid-card:focus-visible{
  outline: 2px solid rgba(255, 255, 255, 0.4);
  outline-offset: 2px;
}

@media (prefers-reduced-motion: reduce) {
  .nightdriver-grid-card,
  .nightdriver-card-image {
    transition: none;
  }
  
  .nightdriver-grid-card:hover {
    transform: none;
  }
  
  .nightdriver-grid-card:hover .nightdriver-card-image {
    transform: none;
  }
}

@media (prefers-color-scheme: light) {
  .nightdriver-grid-card {
    border-color: rgba(0, 0, 0, 0.08);
    box-shadow: 
      0 1px 3px rgba(0, 0, 0, 0.06),
      0 4px 12px rgba(0, 0, 0, 0.04);
  }
  
  .nightdriver-grid-card:hover {
    border-color: rgba(0, 0, 0, 0.12);
    box-shadow: 
      0 4px 12px rgba(0, 0, 0, 0.08),
      0 16px 32px rgba(0, 0, 0, 0.06);
  }
  
  .nightdriver-card-bottom {
    border-top-color: rgba(0, 0, 0, 0.06);
  }
}
/* ========================================
   POSTS LIST
   ======================================== */

.nightdriver-posts-list {
  display: flex;
  flex-direction: column;
}

.nightdriver-post-item {
  padding: var(--space-2xl) 0;
  border-bottom: 1px solid var(--color-border);
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--space-2xl);
  align-items: center;
  transition: var(--transition);
}

.nightdriver-post-item:first-child {
  padding-top: 0;
}

.nightdriver-post-item:last-child {
  border-bottom: none;
  padding-bottom: 0;
}

.nightdriver-post-item:hover {
  background-color: rgba(0, 0, 0, 0.01);
  padding-left: var(--space-lg);
  padding-right: var(--space-lg);
  margin-left: calc(var(--space-lg) * -1);
  margin-right: calc(var(--space-lg) * -1);
}

.nightdriver-post-content {
  display: flex;
  flex-direction: column;
  gap: var(--space-md);
}

.nightdriver-post-meta-top {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  flex-wrap: wrap;
  row-gap: 0.35rem;
  font-family: var(--font-ui);
  font-size: 0.8125rem;
  color: var(--color-text-tertiary);
}

.nightdriver-post-tags {
  display: inline-flex;
  align-items: center;
  gap: 0.4rem;
}

.nightdriver-post-tag {
  display: inline-flex;
  align-items: center;
  font-family: var(--font-ui);
  font-size: 0.7rem;
  font-weight: 700;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  color: var(--color-text-secondary);
  padding: 0.1rem 0.4rem;
  border-radius: var(--radius-sm);
  border: 1px solid var(--color-border);
  background: var(--color-surface);
  transition: var(--transition);
}

.nightdriver-post-tag:hover {
  color: var(--color-text);
  border-color: var(--color-text-tertiary);
}

.nightdriver-post-readtime {
  margin-left: auto;
  font-family: var(--font-ui);
  font-size: 0.8125rem;
  color: var(--color-text-tertiary);
  white-space: nowrap;
}

.nightdriver-post-item-title {
  margin: 0;
  font-size: 1.5rem;
  font-weight: 600;
  line-height: 1.3;
  letter-spacing: -0.01em;
}

.nightdriver-post-item-title a {
  text-decoration: none;
}

.nightdriver-post-item-excerpt {
  margin: 0;
  font-size: 1rem;
  line-height: 1.6;
  color: var(--color-text-secondary);
}

.nightdriver-post-tags-list {
  margin-top: var(--space-sm);
  display: flex;
  flex-wrap: wrap;
  gap: 0.4rem 0.55rem;
  font-family: var(--font-ui);
  font-size: 0.75rem;
  color: var(--color-text-tertiary);
}

.nightdriver-post-tags-section {
  padding: var(--space-md) 0;
}

.nightdriver-post-tags-list--full {
  margin-top: 0;
}

.nightdriver-section--tight {
  padding: var(--space-md) 0;
}

.nightdriver-post-full--single {
  padding-bottom: var(--space-md);
}

.nightdriver-post-taglink {
  display: inline-flex;
  align-items: center;
  padding: 0.15rem 0.45rem;
  border-radius: var(--radius-sm);
  border: 1px solid var(--color-border);
  background: var(--color-surface);
  letter-spacing: 0.04em;
  color: var(--color-text-secondary);
  transition: var(--transition);
}

.nightdriver-post-taglink:hover {
  color: var(--color-text);
  border-color: var(--color-text-tertiary);
}

@media (max-width: 768px) {
  .nightdriver-post-readtime {
    margin-left: 0;
  }
}

.nightdriver-pagination {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-lg);
  font-family: var(--font-ui);
  font-size: 0.75rem;
  color: var(--color-text-tertiary);
}

.nightdriver-pagination a {
  color: inherit;
  text-decoration: none;
  padding: 0.35rem 0.55rem;
  border: 1px solid var(--color-border);
  border-radius: var(--radius-sm);
  transition: var(--transition);
}

.nightdriver-pagination a:hover {
  color: var(--color-text);
  border-color: var(--color-text-tertiary);
}

/* ========================================
   PRODUCTS
   ======================================== */

.nightdriver-products-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: var(--space-2xl);
}

.nightdriver-product-card {
  background-color: var(--color-background);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-lg);
  overflow: hidden;
  transition: var(--transition);
}

.nightdriver-product-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
  border-color: var(--color-text-tertiary);
}

.nightdriver-product-card-image {
  width: 100%;
  aspect-ratio: 16 / 9;
  object-fit: cover;
  background-color: var(--color-surface);
}

.nightdriver-product-card-content {
  padding: var(--space-xl);
}

.nightdriver-product-card-title {
  margin: 0 0 var(--space-sm);
  font-size: 1.25rem;
  font-weight: 600;
  letter-spacing: -0.01em;
}

.nightdriver-product-card-title a {
  text-decoration: none;
}

.nightdriver-product-card-description {
  margin: 0 0 var(--space-lg);
  font-size: 0.9375rem;
  line-height: 1.6;
  color: var(--color-text-secondary);
}

.nightdriver-product-card-footer {
  padding-top: var(--space-md);
  border-top: 1px solid var(--color-border);
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.nightdriver-product-price {
  font-family: var(--font-ui);
  font-size: 1.125rem;
  font-weight: 600;
  color: var(--color-text);
}

.nightdriver-product-button,
.snipcart-add-item {
  display: inline-block;
  text-decoration: none;
  cursor: pointer;
  border: 0;
  border-radius: var(--radius-sm);
  padding: var(--space-sm) var(--space-lg);
  font-family: var(--font-ui);
  font-size: 0.875rem;
  font-weight: 600;
  background-color: var(--color-text);
  color: var(--color-background);
  transition: var(--transition);
}

.nightdriver-product-button:hover,
.snipcart-add-item:hover {
  background-color: var(--color-accent);
}

/* Override third-party button styles (e.g., Snipcart) if their CSS loads after theme */
.nightdriver-post-full-content .snipcart-add-item,
.nightdriver-section .snipcart-add-item {
  display: inline-block;
  text-decoration: none;
  cursor: pointer;
  border: 0 !important;
  border-radius: var(--radius-sm) !important;
  padding: var(--space-sm) var(--space-lg) !important;
  font-family: var(--font-ui) !important;
  font-size: 0.875rem !important;
  font-weight: 600 !important;
  background-color: var(--color-text) !important;
  color: var(--color-background) !important;
  transition: var(--transition) !important;
}

.nightdriver-post-full-content .snipcart-add-item:hover,
.nightdriver-section .snipcart-add-item:hover {
  background-color: var(--color-accent) !important;
  color: var(--color-background) !important;
}

/* ========================================
   SINGLE POST
   ======================================== */

.nightdriver-post-full {
  --section-content-gap: var(--space-2xl);
  --post-header-width: var(--post-content-width);
}

.nightdriver-post-full-header {
  max-width: 100%;
  margin: 0;
  padding: 0;
  text-align: left;
}

.nightdriver-post-full--page .nightdriver-post-full-header {
  max-width: var(--post-content-width);
  text-align: left;
}

.nightdriver-post-full--page .nightdriver-post-full-title,
.nightdriver-post-full--page .nightdriver-post-full-excerpt {
  text-align: left;
}

.nightdriver-post-full-meta {
  display: flex;
  justify-content: flex-start;
  align-items: center;
  gap: var(--space-sm);
  margin: 0 0 1.25rem;
  font-family: var(--font-ui);
  font-size: 0.75rem;
  color: var(--color-text-tertiary);
  letter-spacing: 0.01em;
}

.nightdriver-post-full-title {
  margin: 0 0 var(--space-lg);
  font-size: 3rem;
  font-weight: 600;
  line-height: 1.1;
  letter-spacing: -0.03em;
}

.nightdriver-post-full-excerpt {
  margin: 0 0 var(--space-xl);
  font-size: 1.25rem;
  line-height: 1.5;
  color: var(--color-text-secondary);
}

.nightdriver-post-full-image {
  position: relative;
  margin: 0 auto;
  padding: 0 var(--space-md);
}

.nightdriver-post-full-image.nightdriver-post-full-image-wide {
  max-width: var(--post-image-wide-width);
}

.nightdriver-post-full-image img {
  width: 100%;
  border-radius: var(--radius-lg);
}

.nightdriver-post-full-caption {
  margin-top: var(--space-md);
  font-family: var(--font-ui);
  font-size: 0.8125rem;
  color: var(--color-text-tertiary);
  text-align: left;
}

.nightdriver-post-full-content {
  max-width: 100%;
  margin: 0;
  padding: 0;
  font-size: 1.0625rem;
  line-height: 1.65;
}

.nightdriver-post-full-content > :last-child {
  margin-bottom: 0;
}

.nightdriver-post-full-content p {
  margin: 0 0 1.25rem;
}

.nightdriver-post-full-content h2 {
  margin: 3rem 0 1rem;
  font-size: 2rem;
  font-weight: 600;
  letter-spacing: -0.01em;
}

.nightdriver-post-full-content h3 {
  margin: 2.25rem 0 0.75rem;
  font-size: 1.5rem;
  font-weight: 600;
  letter-spacing: -0.01em;
}


.nightdriver-post-full-content img {
  border-radius: var(--radius-md);
  margin: var(--space-2xl) 0;
}

.nightdriver-post-full-content figure {
  margin: var(--space-2xl) 0;
}

.nightdriver-post-full-content figure img {
  margin: 0;
}

.nightdriver-post-full-content figure figcaption {
  margin-top: var(--space-md);
  font-family: var(--font-ui);
  font-size: 0.8125rem;
  color: var(--color-text-tertiary);
  text-align: left;
}

.nightdriver-post-full-content blockquote {
  margin: var(--space-2xl) 0;
  padding-left: var(--space-xl);
  border-left: 3px solid var(--color-accent);
  font-style: italic;
  color: var(--color-text-secondary);
}

.nightdriver-post-full-content code {
  font-family: var(--font-ui);
  font-size: 0.9em;
  background-color: var(--color-surface);
  padding: 0.2em 0.4em;
  border-radius: var(--radius-sm);
  border: 1px solid var(--color-border);
}

.nightdriver-post-full-content pre {
  margin: var(--space-2xl) 0;
  padding: var(--space-xl);
  border-radius: var(--radius-md);
  background-color: var(--color-text);
  color: var(--color-background);
  overflow-x: auto;
}

.nightdriver-post-full-content pre code {
  background: transparent;
  border: 0;
  padding: 0;
  color: inherit;
}

.nightdriver-post-full-content ul,
.nightdriver-post-full-content ol {
  margin: 0 0 var(--space-lg);
  padding-left: var(--space-xl);
}

.nightdriver-post-full-content li {
  margin-bottom: 0.4rem;
}

.gh-comments,
.gh-comments * {
  text-align: left;
}

.gh-comments {
  margin: 0;
  max-width: 100%;
}

.gh-comments,
.gh-comments * {
  font-family: var(--font-body) !important;
  color: var(--color-text) !important;
}

.gh-comments a {
  color: inherit !important;
}

.gh-comments h1,
.gh-comments h2,
.gh-comments h3,
.gh-comments h4,
.gh-comments h5,
.gh-comments h6 {
  font-family: var(--font-heading) !important;
  letter-spacing: var(--tracking-heading) !important;
}

.gh-comments .gh-comments-title {
  font-family: var(--font-heading) !important;
  font-size: 1.25rem;
  font-weight: 600;
  letter-spacing: -0.01em;
}

.gh-comments .gh-comments-count {
  font-family: var(--font-ui) !important;
  font-size: 0.75rem;
  letter-spacing: var(--tracking-ui);
  text-transform: uppercase;
  color: var(--color-text-tertiary) !important;
}

.gh-comments .gh-comments-cta {
  color: var(--color-text-secondary) !important;
}

.gh-comments .gh-btn,
.gh-comments .gh-btn-primary,
.gh-comments .gh-btn-secondary,
.gh-comments a.gh-btn,
.gh-comments a.gh-btn-primary,
.gh-comments a.gh-btn-secondary,
.gh-comments button,
.gh-comments input[type="submit"],
.gh-comments input[type="button"] {
  font-family: var(--font-ui) !important;
  font-size: 0.75rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: var(--tracking-ui);
  color: var(--color-text) !important;
  background: var(--color-surface) !important;
  border: 1px solid var(--color-border) !important;
  border-radius: var(--radius-sm) !important;
  box-shadow: none !important;
  padding: 0.45rem 0.8rem;
  transition: var(--transition);
}

.gh-comments .gh-btn:hover,
.gh-comments .gh-btn-primary:hover,
.gh-comments .gh-btn-secondary:hover,
.gh-comments a.gh-btn:hover,
.gh-comments a.gh-btn-primary:hover,
.gh-comments a.gh-btn-secondary:hover,
.gh-comments button:hover,
.gh-comments input[type="submit"]:hover,
.gh-comments input[type="button"]:hover {
  border-color: var(--color-text-tertiary) !important;
  color: var(--color-text) !important;
}

.gh-comments input,
.gh-comments textarea,
.gh-comments select {
  font-family: var(--font-body) !important;
  color: var(--color-text) !important;
  background: var(--color-background) !important;
  border-color: var(--color-border) !important;
}

.gh-comments a[data-portal="signin"],
.gh-comments a[href*="#/portal/signin"],
.gh-comments a[href*="portal/signin"] {
  color: #22c55e !important;
  font-weight: 600;
  opacity: 1 !important;
}

.gh-comments a[data-portal="signin"]:hover,
.gh-comments a[href*="#/portal/signin"]:hover,
.gh-comments a[href*="portal/signin"]:hover {
  color: #16a34a !important;
}

.nightdriver-post-nav {
  display: flex;
  align-items: stretch;
  justify-content: space-between;
  gap: var(--space-lg);
}

.nightdriver-post-nav:has(.nightdriver-post-nav-link--next):not(:has(.nightdriver-post-nav-link--prev)) {
  justify-content: flex-end;
}

.nightdriver-post-nav-link {
  flex: 1 1 0;
  max-width: calc(50% - (var(--space-lg) / 2));
  display: flex;
  flex-direction: column;
  gap: 0.35rem;
  padding: var(--space-md) var(--space-lg);
  border-radius: var(--radius-md);
  border: 1px solid var(--color-border);
  background: var(--color-surface);
  color: inherit;
  text-decoration: none;
}

.nightdriver-post-nav-link--next {
  text-align: right;
  margin-left: auto;
}

.nightdriver-post-nav-label {
  font-family: var(--font-ui);
  font-size: 0.7rem;
  text-transform: uppercase;
  letter-spacing: var(--tracking-ui);
  color: var(--color-text-tertiary);
}

.nightdriver-post-nav-title {
  font-family: var(--font-heading);
  font-size: 1rem;
  line-height: 1.35;
  color: var(--color-text);
}

/* ========================================
   KOENIG EDITOR - REQUIRED CLASSES
   ======================================== */

.kg-width-wide {
  position: relative;
  width: 100vw;
  left: 50%;
  right: 50%;
  margin-left: -50vw;
  margin-right: -50vw;
  max-width: var(--post-image-wide-width);
  margin-left: calc((var(--post-content-width) - var(--post-image-wide-width)) / 2);
  margin-right: calc((var(--post-content-width) - var(--post-image-wide-width)) / 2);
}

.kg-width-full {
  position: relative;
  width: 100vw;
  left: 50%;
  right: 50%;
  margin-left: -50vw;
  margin-right: -50vw;
}

/* Option C Instrument panel */

.nightdriver-progress {
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  height: var(--nightdriver-progress-height, 2px);
  z-index: 120;
  background: var(--nightdriver-progress-track-color, #1a1a1a);
  pointer-events: none;
}

.nightdriver-progress-bar {
  height: 100%;
  width: 100%;
  background: var(--nightdriver-progress-bar-color, var(--color-accent));
  transform-origin: 0 50%;
  transform: scaleX(0);
  position: relative;
  overflow: hidden;
}

/* ========================================
   PROGRESS BAR ANIMATION OPTIONS
   Comment/uncomment the option you want to use
   Only ONE option should be active at a time
   ======================================== */

/* OPTION 1: FLOWING SHINE (Default - Active) */

.nightdriver-progress-bar::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(255, 255, 255, 0.3) 25%,
    rgba(255, 255, 255, 0.5) 50%,
    rgba(255, 255, 255, 0.3) 75%,
    transparent 100%
  );
  animation: progress-flow 2s linear infinite;
}

@keyframes progress-flow {
  0% {
    left: -100%;
  }
  100% {
    left: 100%;
  }
}

/* OPTION 2: NO ANIMATION - Uncomment to use solid color only */
/*
.nightdriver-progress-bar::before {
  display: none;
}
*/

.nightdriver-post-full-header {
  text-align: left;
}

.nightdriver-panel {
  display: flex;
  align-items: center;
  justify-content: flex-start;
  gap: var(--space-lg);
  padding: 0 0 var(--space-md);
  margin: 0 0 var(--space-xl);
  border-bottom: 1px solid var(--color-border);
}

.nightdriver-tag a {
  display: inline-flex;
  align-items: center;
  font-family: var(--font-ui);
  font-size: 0.75rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: var(--tracking-ui);
  text-decoration: none;
  color: var(--color-text-secondary);
  padding: 0.3rem 0.55rem;
  border-radius: var(--radius-sm);
  border: 1px solid var(--color-border);
  background: var(--color-surface);
  transition: var(--transition);
}

.nightdriver-tag a:hover {
  color: var(--color-text);
  border-color: var(--color-text-tertiary);
}

.nightdriver-meta {
  margin: 0;
  white-space: nowrap;
}

.nightdriver-post-full-title {
  font-size: 3.25rem;
}

@media (max-width: 768px) {
  .nightdriver-panel {
    flex-direction: column;
    align-items: flex-start;
    gap: var(--space-sm);
  }

  .nightdriver-meta {
    justify-content: flex-start;
    white-space: normal;
  }

  .nightdriver-post-full-title {
    font-size: 2.25rem;
  }
}

/* ========================================
   THEME MODES
   Full site switch by overriding existing base variables
   ======================================== */

html.nightdriver-theme-mode-daymode{
  --color-background: #f7f7f5;
  --color-surface: #ffffff;
  --color-border: #e6e6e1;

  --color-text: #151515;
  --color-text-secondary: #5a5a5a;
  --color-text-tertiary: #8a8a8a;

  --card-bg: var(--color-surface);
  --card-border: rgba(0, 0, 0, 0.08);
  --shadow-1: 0 1px 2px rgba(0, 0, 0, 0.06), 0 10px 24px rgba(0, 0, 0, 0.08);
  --shadow-2: 0 3px 10px rgba(0, 0, 0, 0.10), 0 18px 36px rgba(0, 0, 0, 0.14);
}

html.nightdriver-theme-mode-nightmode{
  --color-background: #0b0c0e;
  --color-surface: #101218;
  --color-border: rgba(255,255,255,0.08);

  --color-text: #e6e6e6;
  --color-text-secondary: rgba(230,230,230,0.78);
  --color-text-tertiary: rgba(230,230,230,0.58);

  --color-accent: #0ea5e9;
  --color-accent-hover: #38bdf8;

  --card-bg: #12151c;
  --card-border: rgba(255, 255, 255, 0.10);
  --shadow-1: 0 2px 8px rgba(0, 0, 0, 0.45), 0 18px 36px rgba(0, 0, 0, 0.45);
  --shadow-2: 0 6px 16px rgba(0, 0, 0, 0.5), 0 26px 52px rgba(0, 0, 0, 0.55);

  --body-tracking: -0.008em;
  --heading-tracking: -0.015em;
}

html.nightdriver-theme-mode-custommode{
  /* Custom Mode colors are now fully customizable via Ghost Admin settings */
  /* See the "Custom Mode" settings group in Design settings */
  /* Colors are injected dynamically in default.hbs */
  --body-tracking: -0.008em;
  --heading-tracking: -0.015em;
}

/* Custom Mode hybrid menu - colors injected via default.hbs */
html.nightdriver-theme-mode-custommode .nightdriver-site-header{
  /* Custom header styling handled in default.hbs */
}

html.nightdriver-theme-mode-custommode .nightdriver-site-logo{
  /* Logo color handled in default.hbs */
}

html.nightdriver-theme-mode-custommode .nightdriver-site-logo:hover{
  /* Hover handled in default.hbs */
}

html.nightdriver-theme-mode-custommode .nightdriver-nav-item a{
  /* Nav colors handled in default.hbs */
}

html.nightdriver-theme-mode-custommode .nightdriver-nav-item a:hover{
  /* Nav hover handled in default.hbs */
}

html.nightdriver-theme-mode-custommode .nightdriver-nav-item.nightdriver-nav-item--active a{
  /* Active nav handled in default.hbs */
}


/* ========================================
   FOOTER - PREMIUM FOOTER (CLEAN VERSION)
   ======================================== */

.nightdriver-site-footer {
  background: var(--color-background);
  border-top: 1px solid var(--color-border);
  margin-top: auto;
  flex-shrink: 0;
}

.nightdriver-footer-wrapper {
  max-width: var(--container-width);
  margin: 0 auto;
  padding: 12px var(--container-padding) 8px;
}

/* CTA card (featured-card structure) */
.nightdriver-grid-card--cta .nightdriver-card-media {
  display: flex;
  align-items: center;
  justify-content: center;
}

.nightdriver-card-image--contain {
  object-fit: contain;
  padding: 24px;
}

.nightdriver-grid-card--cta .nightdriver-card-tag {
  padding: 0;
  border: 0;
  background: transparent;
  opacity: 0.8;
}

.nightdriver-card-excerpt {
  margin: 0;
  font-family: var(--font-body);
  font-size: 0.9375rem;
  line-height: 1.45;
  color: var(--color-text-secondary);
}

.nightdriver-cta-actions {
  display: inline-flex;
  align-items: center;
  margin-top: 0.65rem;
  gap: 0.5rem;
}

.nightdriver-cta-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-family: var(--font-ui);
  font-size: 0.75rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: var(--tracking-ui);
  text-decoration: none;
  color: var(--color-text);
  padding: 0.3rem 0.55rem;
  border-radius: var(--radius-sm);
  border: 1px solid var(--color-border);
  background: var(--color-surface);
  transition: var(--transition);
}

.nightdriver-cta-btn:hover {
  border-color: var(--color-text-secondary);
  color: var(--color-text);
}

.nightdriver-cta-btn--secondary {
  background: transparent;
}

/* Unified action button style across cards/sections */
.nightdriver-cta-btn,
.nightdriver-bento-btn,
.nightdriver-bento-chip--link,
.nightdriver-bento-links a {
  min-height: 2.15rem;
  padding: 0 0.75rem;
  border-radius: 0;
  border: 1px solid color-mix(in srgb, var(--color-text) 22%, var(--color-border));
  background: color-mix(in srgb, var(--color-surface) 82%, transparent);
  color: var(--color-text);
  font-family: var(--font-ui);
  font-size: 0.75rem;
  font-weight: 600;
  letter-spacing: var(--tracking-ui);
  text-transform: uppercase;
  text-decoration: none;
  line-height: 1;
  transition: var(--transition);
}

.nightdriver-cta-btn--secondary {
  background: transparent;
}

.nightdriver-cta-btn:hover,
.nightdriver-bento-btn:hover,
.nightdriver-bento-chip--link:hover,
.nightdriver-bento-links a:hover {
  border-color: var(--color-text);
  color: var(--color-text);
  background: color-mix(in srgb, var(--color-surface) 68%, var(--color-background));
}

/* Snipcart add-to-cart: force Nightdriver CTA styling when both classes are present */
.snipcart-add-item.nightdriver-cta-btn,
.nightdriver-post-full-content .snipcart-add-item.nightdriver-cta-btn,
.nightdriver-section .snipcart-add-item.nightdriver-cta-btn {
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
  min-height: 2.15rem !important;
  padding: 0 0.75rem !important;
  border-radius: 0 !important;
  border: 1px solid color-mix(in srgb, var(--color-text) 22%, var(--color-border)) !important;
  background: color-mix(in srgb, var(--color-surface) 82%, transparent) !important;
  color: var(--color-text) !important;
  font-family: var(--font-ui) !important;
  font-size: 0.75rem !important;
  font-weight: 600 !important;
  letter-spacing: var(--tracking-ui) !important;
  text-transform: uppercase !important;
  text-decoration: none !important;
  line-height: 1 !important;
  transition: var(--transition) !important;
}

.snipcart-add-item.nightdriver-cta-btn:hover,
.nightdriver-post-full-content .snipcart-add-item.nightdriver-cta-btn:hover,
.nightdriver-section .snipcart-add-item.nightdriver-cta-btn:hover {
  border-color: var(--color-text) !important;
  color: var(--color-text) !important;
  background: color-mix(in srgb, var(--color-surface) 68%, var(--color-background)) !important;
}

.nightdriver-flexible-grid--single {
  grid-template-columns: minmax(0, 1fr);
  justify-items: center;
}

.nightdriver-flexible-grid--single .nightdriver-grid-card {
  width: 100%;
  max-width: 450px;
}

.nightdriver-grid-card--cta .nightdriver-card-media {
  position: relative;
}

/* ========================================
   BOTTOM BAR
   ======================================== */

.nightdriver-footer-bottom {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0;
  padding-top: 0;
}

/* ========================================
   COPYRIGHT
   ======================================== */

.nightdriver-footer-bottom-left {
  display: flex;
  align-items: center;
}

.nightdriver-footer-copyright {
  margin: 0;
  font-family: var(--font-ui);
  font-size: 0.7rem;
  letter-spacing: var(--tracking-ui);
  text-transform: uppercase;
  color: var(--color-text-tertiary);
  white-space: nowrap;
  line-height: 1.4;
  padding: 10px 0;
}

/* Published with Ghost */
.nightdriver-footer-ghost-link {
  margin-top: 0;
  font: inherit;
  text-transform: inherit;
  letter-spacing: inherit;
  color: inherit;
  text-decoration: none;
  transition: var(--transition);
}

.nightdriver-footer-ghost-link:hover {
  color: inherit;
}

.nightdriver-footer-ghost-sep {
  color: inherit;
}

/* ========================================
   THEME-SPECIFIC STYLES
   ======================================== */

/* Night Mode Theme */
html.nightdriver-theme-mode-nightmode .nightdriver-site-footer {
  background: var(--color-background);
  border-top-color: var(--color-border);
}

/* Custom Mode Theme */
html.nightdriver-theme-mode-custommode .nightdriver-site-footer {
  background: var(--color-background);
  border-top-color: var(--color-border);
}

/* ========================================
   RESPONSIVE DESIGN
   ======================================== */

@media (max-width: 768px) {
  :root {
    --section-pad-y: var(--space-3xl);
    --section-pad-y-compact: var(--space-2xl);
    --ui-spacer-height: var(--space-2xl);
  }

  .nightdriver-site-footer {
    margin-top: 0;
  }

  .nightdriver-footer-wrapper {
    padding: 8px var(--container-padding) 6px;
  }

  .nightdriver-footer-bottom {
    flex-direction: column-reverse;
    align-items: stretch;
    gap: 0;
  }
  
  .nightdriver-footer-bottom-left {
    justify-content: center;
  }
  
  .nightdriver-footer-copyright {
    text-align: center;
    padding: 4px 0;
  }
}

@media (max-width: 768px) {
  .nightdriver-header-utility .nightdriver-control--brackets::before,
  .nightdriver-header-utility .nightdriver-control--brackets::after {
    display: none;
  }

  .nightdriver-header-utility .nightdriver-search-btn span,
  .nightdriver-header-utility .nightdriver-header-cta span {
    display: none;
  }

  .nightdriver-mode-rail__end,
  .nightdriver-mode-rail__midlabel {
    display: none;
  }

  .nightdriver-mode-rail {
    min-width: 160px;
  }

  .nightdriver-header-utility-right {
    display: none;
  }
}

@media (max-width: 480px) {
  .nightdriver-site-footer {
    margin-top: 0;
  }

  .nightdriver-footer-wrapper {
    padding: var(--space-2xl) var(--space-lg);
  }
}


 

/* ========================================
   TOP NAV
   ======================================== */

   /* Desktop vs mobile */
.nightdriver-nav-toggle { display: none; }

@media (max-width: 900px) {
  .nightdriver-site-nav { display: none; }
  .nightdriver-nav-toggle { display: inline-flex; }
}

/* Toggle button */
.nightdriver-nav-toggle {
  align-items: center;
  justify-content: center;
  width: 44px;
  height: 44px;
  border: 0;
  background: transparent;
  border-radius: 10px;
  color: var(--color-text-secondary);
  cursor: pointer;
  transition: var(--transition);
}
.nightdriver-nav-toggle:hover,
.nightdriver-nav-toggle:focus-visible {
  color: var(--color-text);
}

/* SVG-based hamburger/close icon */
.nightdriver-nav-toggle-icon {
  position: relative;
  width: 24px;
  height: 24px;
  display: inline-grid;
  place-items: center;
  background: transparent;
}

.nightdriver-nav-toggle-icon::before,
.nightdriver-nav-toggle-icon::after {
  content: none;
  display: none;
}

/* Drawer base */
.nightdriver-nav-drawer {
  position: fixed;
  top: var(--header-height);
  right: 0;
  bottom: 0;
  left: 0;
  z-index: 90;
}

.nightdriver-nav-drawer-backdrop {
  position: absolute;
  inset: 0;
  background: rgba(0,0,0,0.45);
}

.nightdriver-nav-drawer-panel {
  position: absolute;
  top: 0;
  right: 0;
  height: 100%;
  width: min(380px, 92vw);
  background: var(--color-background);
  color: var(--color-text);
  box-shadow: -24px 0 80px rgba(0,0,0,0.35);
  padding: 18px;
  transform: translateX(100%);
  transition: transform 180ms ease;
  border-left: 1px solid var(--color-border);
  border-top-left-radius: 16px;
  border-bottom-left-radius: 16px;
}

/* Open state */
.nightdriver-nav-open .nightdriver-nav-drawer-panel {
  transform: translateX(0);
}

/* Animate hamburger -> X when open (handled by SVG swap) */

/* Drawer header */
.nightdriver-nav-drawer-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 14px;
  border-bottom: 1px solid var(--color-border);
  padding-bottom: 12px;
}

.nightdriver-nav-drawer-title {
  font-family: var(--font-ui);
  font-size: 0.75rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: var(--tracking-ui);
  color: var(--color-text-secondary);
}


/* Mobile nav list styling (reuses your existing .nightdriver-nav-list) */
.nightdriver-nav-drawer-nav .nightdriver-nav-list {
  display: grid;
  gap: 0px;
  margin: 0;
  padding: 12px 10px;
  list-style: none;
}
.nightdriver-nav-drawer-nav .nightdriver-nav-item a {
  display: block;
  padding: 2px 0px;
  border-radius: 12px;
  text-decoration: none;
}

.nightdriver-nav-toggle-icon .nightdriver-icon{
  grid-area: 1 / 1;
  width: 24px;
  height: 24px;
  display: block;
  color: currentColor;
}

/* Both icons should be exactly the same size */
.nightdriver-nav-toggle-icon .nightdriver-icon-menu,
.nightdriver-nav-toggle-icon .nightdriver-icon-menu-close {
  width: 24px;
  height: 24px;
}

/* Show only one icon based on state */
.nightdriver-nav-toggle .nightdriver-icon-menu,
.nightdriver-nav-toggle .nightdriver-icon-menu-close {
  display: none;
}
.nightdriver-nav-toggle[aria-expanded="false"] .nightdriver-icon-menu {
  display: block;
}
.nightdriver-nav-toggle[aria-expanded="true"] .nightdriver-icon-menu-close {
  display: block;
}
.nightdriver-mode-rail__end:hover,
.nightdriver-mode-rail__end:focus-visible {
  opacity: 1;
  color: var(--color-text);
}

.nightdriver-mode-rail__midlabel:hover,
.nightdriver-mode-rail__midlabel:focus-visible {
  opacity: 1;
  color: var(--color-text);
}

.nightdriver-mode-rail[data-active="day"] .nightdriver-mode-rail__end[data-mode="day"],
.nightdriver-mode-rail[data-active="night"] .nightdriver-mode-rail__end[data-mode="night"],
.nightdriver-mode-rail[data-active="custom"] .nightdriver-mode-rail__midlabel {
  opacity: 1;
  color: var(--color-text);
}

/* ========================================
   UNIVERSAL TEXT ALIGNMENT FIX
   Forces ALL text content to left-align
   Overrides Ghost editor inline styles
   ======================================== */

/* Master rule: All text elements left-aligned */
h1, h2, h3, h4, h5, h6,
p, li, td, th, dt, dd,
blockquote, figcaption, caption,
.nightdriver-post-full-title,
.nightdriver-post-full-excerpt,
.nightdriver-post-full-content,
.nightdriver-post-full-content *,
.nightdriver-post-full-header,
.nightdriver-post-full-header *,
.nightdriver-hero-title,
.nightdriver-hero-description,
.nightdriver-section-title,
.nightdriver-post-item-title,
.nightdriver-post-item-excerpt,
.nightdriver-card-title,
.nightdriver-card-excerpt,
.gh-content,
.gh-content *,
.kg-card,
.kg-card *,
[class*="kg-"] p,
[class*="kg-"] h1,
[class*="kg-"] h2,
[class*="kg-"] h3,
[class*="kg-"] h4,
[class*="kg-"] h5,
[class*="kg-"] h6 {
  text-align: left !important;
}

/* Override Ghost editor inline styles */
[style*="text-align: center"],
[style*="text-align:center"],
[style*="text-align: justify"],
[style*="text-align:justify"] {
  text-align: left !important;
}

/* Ghost editor button card styling */
.kg-button-card {
  margin: var(--space-xl) 0;
}

.kg-button-card .kg-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-height: 2.15rem;
  padding: 0 0.75rem;
  border-radius: 0;
  border: 1px solid color-mix(in srgb, var(--color-text) 22%, var(--color-border)) !important;
  background: color-mix(in srgb, var(--color-surface) 82%, transparent) !important;
  color: var(--color-text) !important;
  font-family: var(--font-ui);
  font-size: 0.75rem;
  font-weight: 600;
  letter-spacing: var(--tracking-ui);
  text-transform: uppercase;
  text-decoration: none !important;
  line-height: 1;
  transition: var(--transition);
  box-shadow: none !important;
}

.kg-button-card .kg-btn:hover {
  border-color: var(--color-text) !important;
  background: color-mix(in srgb, var(--color-surface) 68%, var(--color-background)) !important;
  color: var(--color-text) !important;
}

/* ========================================
   UNIFIED BUTTON/TAG STYLE (KG-BTN-ACCENT)
   ======================================== */

:root {
  --nightdriver-btn-height: 2.15rem;
  --nightdriver-btn-pad-x: 0.75rem;
  --nightdriver-btn-font-size: 0.75rem;
  --nightdriver-btn-weight: 600;
  --nightdriver-btn-letter: var(--tracking-ui);
  --nightdriver-btn-border: color-mix(in srgb, var(--color-text) 22%, var(--color-border));
  --nightdriver-btn-bg: color-mix(in srgb, var(--color-surface) 82%, transparent);
  --nightdriver-btn-bg-hover: color-mix(in srgb, var(--color-surface) 68%, var(--color-background));
}

:where(
  .kg-btn,
  .kg-btn-accent,
  .gh-btn,
  .gh-btn-primary,
  .gh-btn-secondary,
  .nightdriver-cta-btn,
  .nightdriver-bento-btn,
  .nightdriver-bento-chip--link,
  .nightdriver-bento-links a,
  .nightdriver-product-button,
  .snipcart-add-item,
  .snipcart-add-item.nightdriver-cta-btn,
  .nightdriver-tag a,
  .nightdriver-card-tag,
  .nightdriver-post-tag,
  .nightdriver-post-taglink,
  .nightdriver-bento-tag,
  .nightdriver-post-tags-list a,
  .nightdriver-pagination a,
  .nightdriver-copy-code-button
) {
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
  min-height: var(--nightdriver-btn-height) !important;
  padding: 0 var(--nightdriver-btn-pad-x) !important;
  border-radius: 0 !important;
  border: 1px solid var(--nightdriver-btn-border) !important;
  background-color: var(--nightdriver-btn-bg) !important;
  color: var(--color-text) !important;
  font-family: var(--font-ui) !important;
  font-size: var(--nightdriver-btn-font-size) !important;
  font-weight: var(--nightdriver-btn-weight) !important;
  letter-spacing: var(--nightdriver-btn-letter) !important;
  text-transform: uppercase !important;
  text-decoration: none !important;
  line-height: 1 !important;
  box-shadow: none !important;
  transition: var(--transition) !important;
}

:where(
  .kg-btn,
  .kg-btn-accent,
  .gh-btn,
  .gh-btn-primary,
  .gh-btn-secondary,
  .nightdriver-cta-btn,
  .nightdriver-bento-btn,
  .nightdriver-bento-chip--link,
  .nightdriver-bento-links a,
  .nightdriver-product-button,
  .snipcart-add-item,
  .snipcart-add-item.nightdriver-cta-btn,
  .nightdriver-tag a,
  .nightdriver-card-tag,
  .nightdriver-post-tag,
  .nightdriver-post-taglink,
  .nightdriver-bento-tag,
  .nightdriver-post-tags-list a,
  .nightdriver-pagination a,
  .nightdriver-copy-code-button
):hover {
  border-color: var(--color-text) !important;
  background-color: var(--nightdriver-btn-bg-hover) !important;
  color: var(--color-text) !important;
}

.nightdriver-copy-code-button {
  position: absolute;
  top: 0.5rem;
  right: 0.5rem;
  z-index: 2;
}

/* Ghost bookmark card spacing */
.kg-bookmark-metadata {
  display: inline-flex;
  align-items: center;
  gap: 0.45rem;
}

.kg-bookmark-icon {
  width: 1.05rem;
  height: 1.05rem;
  flex: 0 0 auto;
  margin-right: 0.15rem;
}
